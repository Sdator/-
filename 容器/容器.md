# 容器记录

- 环境
  - W10 平台

## WSL2 玩容器

有两种安装方式

- linux 原生安装，使用官方提供的脚本安装
- 搭配 docker for window 安装

## 开启 tcp 远程连接

```bash
cat > /etc/docker/daemon.json <<EOF
{
"hosts": ["tcp://0.0.0.0:2376","unix:///var/run/docker.sock"]
}
EOF

# 设置远程服务主机地址
$Env:DOCKER_HOST = "tcp://x.x.x.x:2376"

```

## 踩坑

- 环境
  - W10 平台
  - git-bash
- 关键命令
  - $(cmd //c echo %CD%)
- 问题
  - 在 Window 下使用 git-bash 执行容器如何通过命令代入正确的路径？
- 解决方案
  - 在 WSL2 中执行容器相关指令即可解决 Window 平台的各种问题

### Windows 平台下正确读取路径的方法

```bash
docker run --rm -v $(cmd //c echo %CD%):/tmp -it sdator/tools ls -al
```

### 错误例子

```bash
# 但适合 linux 平台
docker run --rm -v `pwd`:/tmp -it sdator/tools ls -al
docker run --rm -v $(pwd):/tmp -it sdator/tools ls -al
docker run --rm -v "${pwd}":/tmp -it sdator/tools ls -al
```
